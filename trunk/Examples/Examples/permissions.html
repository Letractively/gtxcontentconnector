<html>
<head>
<script src="jquery-1.2.1.js" type="text/javascript"></script>
</head>
<body>
<script type="text/javascript">
$(function() {
	$('#update-target a').click(function() {
	  	$.ajax({
		    url: '/ContentRepository/pcr',
		    type: 'GET',
		    dataType: 'xml',
		    //data: "contentid=1001.6&attributes=firstname,surname", // load single object
		    data: "filter=object.obj_type==90021&attributes=key&attributes=name", // load list of objects
			success: function(xml){
				var options="";
				$(xml).find('Object').each(function(){
					// load child nodes
		        	var name = $(this).find('name').text();
		           	var key = $(this).find('key').text();
		            options+="<option value=\""+key+"\">"+name+"</option>";
		        }); //close each
		        $("select#permission").html(options);
		        
		     } // close success
        }); //close $.ajax(
        
    }); //close click(
    $("select#permission").change(function(){
    	var selection=$(this).find('option').filter(':selected').val();
    	$.ajax({
		    url: '/ContentRepository/pcr',
		    type: 'GET',
		    dataType: 'xml',
		    //data: "contentid=1001.6&attributes=firstname,surname", // load single object
		    data: "filter=object.obj_type==90021%20AND%20object.key==\""+selection+"\"&attributes=description", // load list of objects
			success: function(xml){
				var options="";
				$(xml).find('Object').each(function(){
					// load child nodes
		        	var description = $(this).find('description').text();
		            options+=""+description+"<br/>";
		        }); //close each
		        $("#desc p").html(options);
		        
		     } // close success
        }); //close $.ajax(
    });
}); //close $(
</script>
<div id='update-target'><a href="#">Click here to load data</a>
</div>
<table border="0">
<tr><td width="300"><select name="permission" id="permission">
</select></td><td width="500"><div id="desc"><p>&nbsp;</p></div></td></tr>
</table>
</body>
</html>
